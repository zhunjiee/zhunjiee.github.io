---
layout: post
title: "Swift入门-字典"
date: 2014-11-07
comments: false
categories: Swift
---

##字典

* 和OC的区别

	* 1. {} 替换为 []

	* 2. 去掉所有@



* 可变字典   var

* 不可变字典 let





```

var dict = ["name": "lnj", "age": 30]

let dict2: [String : NSObject] = ["name": "lnj", "age": 30]

// AnyObject == NSObject

let dict3: Dictionary<String, AnyObject> = ["name": "lnj", "age": 30]



// 注意: 在企业开发中, 使用频率最高的字典类型就是[String: AnyObject]

let dict4 = [String: AnyObject]()



// 取值

dict["name"]



// 更新

// 如果给一个存在的key赋值, 那么就是更新

dict["name"] = "zs"

dict



// 增加

// 如果给一个不存在的key赋值, 那么就是增加

dict["score"] = 99.9

dict



// 删除

dict.removeValueForKey("name")

dict



// 遍历

for key in dict.keys

{

    print(dict[key])

}



// 会取出字典中的key赋值给k, 取出字典中的value赋值给v

// 注意: k和v随便写, 但是需要注意key一定是赋值给前面一个遍历, value一定是赋值给后面一个遍历

for (key, value) in dict

{

    print(key)

    print(value)

}

```





##字典转模型

```

    var access_token: String?
    var expires_in: NSNumber?
    var uid: String?
    
    
    /// 字典转模型
    init(dict: [String : AnyObject]) {
        super.init()
        setValuesForKeysWithDictionary(dict)
    }

    override func setValue(value: AnyObject?, forUndefinedKey key: String) {
    }

    override var description: String {
        let property = ["access_token", "expires_in", "uid"]
        let dict = dictionaryWithValuesForKeys(property)
        return "\(dict)"
    }
```

##定义字典模型

```

class Status: NSObject {

    /// 当前这条微博的发布时间

    var created_at: String?

    /// 来源

    var source: String?

    /// 字符串型的微博ID

    var idstr: String?

    /// 微博信息内容

    var text: String?

    

    init(dict: [String: AnyObject])

    {

        super.init()

        setValuesForKeysWithDictionary(dict)

    }

    override func setValue(value: AnyObject?, forUndefinedKey key: String) {

    }

    

    override var description: String {

        let property = ["created_at", "source", "idstr", "text"]

        let dict = dictionaryWithValuesForKeys(property)

        return "\(dict)"

    }



}

```





##字典数组转模型数组

```

/// 保存所有微博数据的数组

    var statuses : [Status]?



// 2. 遍历字典数组,处理微博数据

    // 字典数组 转 模型数组

    var models = [Status]()

    for dict in array {

        models.append(Status(dict: dict)) // 往模型数组中添加模型

    }

    self.statuses = models

```





调用：

 Status(dict:字典），返回值就是一个status模型





##嵌套字典转模型

```

init(dict: [String : AnyObject]) {
        super.init()
        setValuesForKeysWithDictionary(dict)
    }
    // KVC的setValuesForKeysWithDictionary方法内部会调用下面这个方法
    override func setValue(value: AnyObject?, forKey key: String) {
        if key == "user" {
            user = User(dict: value as! [String : AnyObject])
            return // 注意: 如果自己处理了, 那么就不需要父类处理了, 所以一定要写上return
        }
        super.setValue(value, forKey: key)
    }
    
    override func setValue(value: AnyObject?, forUndefinedKey key: String) {
        
    }
    override var description: String {
        let property = ["created_at", "source", "idstr", "text"]
        let dict = dictionaryWithValuesForKeys(property)
        return "\(dict)"
    }
```