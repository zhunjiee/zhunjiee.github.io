---
layout: post
title: "iOS开发之 坐标系的转换"
date: 2014-05-27
comments: false
categories: 实用技术
---

##坐标转换

在开发中我们有时会有这样一个需求:将一个控件的坐标系转换为以另一个view为参照的坐标系,此时我们就需要用到iOS中的坐标转换

我们在开发中经常将坐标系转换用于判断一个View在不在window上



###例 : 将self.blueView转换为以window为坐标原点



![](https://dn-zhunjiee.qbox.me/Snip20151029_1.png)





### 将self.blueView.frame从self.redView转换为self.view.window坐标系

```

CGRect newRect = [self.view.window convertRect:self.blueView.frame fromView:self.redView];



CGRect newRect = [self.view.window convertRect:self.blueView.bounds fromView:self.blueView];

```

### 将self.blueView转换为以windows为坐标原点

```

CGRect newRect = [self.blueView convertRect:self.blueView.bounds toView:nil]; // 传nil默认就是window的坐标原点



CGRect newRect = [self.redView convertRect:self.blueView.frame toView:nil];

```

##CGRectIntersectsRect(Rect1, Rect2)

**CGRectIntersectsRect**(windowRect, scrollViewRect) : 比较window和scrollView是否有重合



```objc


// 计算出 scrollView 以 window 为坐标系的rect ，涉及到的坐标系转换见下一节

       CGRect scrollViewRect = [scrollView convertRect:scrollView.bounds toView:nil];

       CGRect windowRect = scrollView.window.bounds;


       // 判断 scrollView 和 window 是否重合

       if (!CGRectIntersectsRect(windowRect, scrollViewRect)) return;

```