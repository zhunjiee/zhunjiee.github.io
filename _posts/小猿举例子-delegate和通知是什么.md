---
layout: post
title: "小猿举例子-delegate和通知的实现机制"
date: 2015-06-06
comments: false
categories: 知识囊
---

有些同学在学习完delegate和通知以后还是迷迷糊糊，不知道他俩是什么东西，所以我就通过举两个例子来告诉大家delegate和通知（NSNotification）是什么，有什么区别。

###首先是代理：

举一个最简单的例子，如果一个婴儿饿了，他又不能自己做东西吃，他会通过哭声传递他饿了，这就相当于**定义一个协议，声明一些代理的方法**。这时候得需要别人帮忙，找人也不能随便找人，这个人是他的父母，雇佣的保姆也可以，这就达成了一种协议，能喂婴儿的必须满足什么条件，这和代理模式中**想要成为代理必须先遵循代理协议**是一样的。只有遵循了代理协议，才可以调用相关的代理方法，在代理方法中去实现一些功能。
代理是比较规范，我们可以很清晰的通过代理方法大概知道该方法具体的作用，但是代码多。
代理默认是1对1的实现方式。

###然后我们来聊一下通知，不许笑
我们都知道在对象间进行**信息传递**的标准方式就是**消息**，在iOS系统下，通过广播机制来达到这个目的。
对象向**通知中心**（NSNotificationCenter：是一个单例类，是线程安全的）投递一个通知，由通知中心分发给感兴趣的**接收者**，可以通过addObserver：方法注册通知监听器对感兴趣的通知进行监听。
通知中心的原理非常符合观察者（Observer）模式。

再举例说明：
我们可以从上面的说明中看出通知中心就相当于一个广播，村支书（通知发布者）通过广播喊一声谁家里丢的老母猪跑到村委大院了，赶紧来领回去，至于谁来领他就不管了，反正别让老母猪在村委大院里待着了，影响村容。所以这就是通知一对多的特性。听到广播的张三李四王二麻子都来村委了，这就相当于一个通知被多个对象接收。广播除了喊丢猪的事情还喊该交电费了，这就发出去了两个通知，恰巧张三又丢了老母猪又该交电费了，这就相当于一个对象可以接收多个通知。所以通知的使用还是比较灵活的，常用在不需要考虑消息接收者。


至此，

你笑了没？反正我没笑
